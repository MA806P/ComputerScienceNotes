



# 概念  

 







# 问题  



长连接

TCP连接三次握手、四次握手

https://www.jianshu.com/p/31df5454d6fc





在 HTTPS 连接的网站中，输入密码登录，到服务器返回这个请求前，经历了什么？

1、C 打包请求。包括 URL、端口、账号、密码等。post 方式，相关信息会加载到 body 中，这个请求包含三个方面 网络地址、协议、资源路径。

2、S 接受请求。一般 C 的请求会被发送到 DNS 服务器中，将网络地址解析成 IP 地址，可能会发生 Hosts Hijack 和 ISP failure 的问题。信息到了 S，C 和 S 会建立一个 Socket 连接。Socket 一般都是以 file descriptor 的方式解析请求。相当于s分析是否向c发送钥匙模板。

3、S 返回数字证书。S 有一套数字证书，相当于一个钥匙模板，这个过程相当于 S 向 C 发送钥匙模板。

4、C 生成加密信息。根据收到的数字证书(钥匙模板)，C 会生成钥匙，并把内容锁上，信息被加密。这个过相当于 C 生成钥匙并锁上请求。

5、C 发送加密信息。S 收到自己发送的数字证书加锁的信息，生成的钥匙也被发送到服务器端。这个过程相当于 C 发送请求。

6、S 解锁加密信息。S 根据得到的钥匙进行解密，并把要返回的数据进行对称加密，这个过程相当于 S 解锁请求，生成、加锁回应信息。

7、S 向 C 返回信息。C 收到相应的加密信息。相当于 S 向 C 发送回应信息。

8、C 解锁返回信息。C 用刚生成的钥匙进行解密，将内容显示出来。